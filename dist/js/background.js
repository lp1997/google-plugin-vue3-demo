(function(){"use strict";const e=()=>new Promise((e=>{window.chrome.tabs.query({active:!0,currentWindow:!0},(n=>{e(n[0].id)}))})),n=(e,n,t)=>{window.chrome.tabs.sendMessage(e,n,(e=>{t&&t(e)}))},t=e=>{window.chrome.runtime.onMessage.addListener(((n,t,o)=>{e&&e(n,t,o)}))},o=e=>{window.chrome.runtime.onConnect.addListener((n=>{n.onMessage.addListener(e),n.onDisconnect.addListener((n=>{n.onMessage.removeListener(e)}))}))},i=e=>new Promise((n=>e.createReader().readEntries((e=>{Promise.all(e.filter((e=>"."!==e.name[0])).map((e=>e.isDirectory?i(e):new Promise((n=>e.file(n)))))).then((e=>[].concat(...e))).then(n)})))),r=e=>i(e).then((e=>e.map((e=>e.name+e.lastModifiedDate)).join())),a=()=>{window.chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0]&&window.chrome.tabs.reload(e[0].id),window.chrome.runtime.reload()}))},s=(e,n)=>{r(e).then((t=>{n&&n!==t?a():setTimeout((()=>s(e,t)),1e3)}))},c=()=>{window.chrome.management.getSelf((e=>{"development"===e.installType&&window.chrome.runtime.getPackageDirectoryEntry((e=>s(e)))}))};var d=c;const m=()=>{let i=!1;t((async(t,r,a)=>{a(t.loadTime);const s=await e();if(!i){i=!0;const e=async function(e){"web请求"===e.name&&n(s,e.data,(function(){}))};o(e)}}))},w=()=>{d(),m()};w()})();